<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test via Photo</title>
</head>
<body>
    <h1>Test de Géolocalisation via Photo</h1>
    <p>Clique sur le bouton pour envoyer ta position :</p>
    <button id="sendPosition">Envoyer ma position</button>

    <script>
        document.getElementById('sendPosition').addEventListener('click', function () {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    var latitude = position.coords.latitude;
                    var longitude = position.coords.longitude;

                    var xhr = new XMLHttpRequest();
                    xhr.open("POST", "photo.php", true);
                    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

                    xhr.onreadystatechange = function () {
                        if (xhr.readyState === 4) {
                            if (xhr.status === 200) {
                                var response = JSON.parse(xhr.responseText);
                                if (response.status === 'success') {
                                    alert("Position enregistrée avec succès : " + response.message);
                                } else {
                                    alert("Erreur : " + response.message);
                                }
                            } else {
                                alert("Erreur HTTP : " + xhr.status);
                            }
                        }
                    };

                    xhr.send("latitude=" + latitude + "&longitude=" + longitude);
                });
            } else {
                alert("La géolocalisation n'est pas supportée par ce navigateur.");
            }
        });
    </script>
</body>
</html>
